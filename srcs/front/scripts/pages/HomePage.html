<div id="wizz-container" class="relative w-full h-[calc(100vh-50px)] overflow-hidden bg-gradient-to-b from-white via-white to-[#7ED5F4]">

	<div class="absolute top-0 left-0 w-full h-[200px] bg-cover bg-center bg-no-repeat"
		 style="background-image: url(https://wlm.vercel.app/assets/background/background.jpg); background-size: cover;">
	</div>

	<div class="absolute top-[20px] bottom-0 left-0 right-0 flex flex-col px-10 py-2 gap-2" style="padding-left: 100px; padding-right: 100px; bottom: 100px;">
		
		<!-- Container avec left et right qui prennent toute la hauteur restante -->
		<div class="flex gap-6 flex-1 min-h-0" style="gap:80px;">

			<!-- ========= LEFT WINDOW ========= -->
			<div class="window w-[700px] min-w-[700px] flex flex-col">
				<div class="title-bar">
					<div class="title-bar-text">Games</div>
					<div class="title-bar-controls">
						<button aria-label="Minimize"></button>
						<button aria-label="Maximize"></button>
						<button aria-label="Close"></button>
					</div>
				</div>

				<div id="left" class="window-body flex flex-col h-full w-[700px] min-w-[700px] shrink-0 bg-white border border-gray-300 shadow-inner rounded-sm" style="width: 700px; min-width: 700px">
					<div class="flex flex-row w-full h-[160px] rounded-sm p-2 flex-shrink-0 border-b border-gray-300"> 
						<!-- Cadre du profil -->
						<div class="flex flex-row w-full h-[160px] bg-transparent rounded-sm p-2 flex-shrink-0" style="height: 125px; flex-shrink: 0;">
							<div class="relative w-[110px] h-[110px] flex-shrink-0">
								<!-- l'image (profil principal) -->
								<img id="user-profile" class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[75px] h-[75px] object-cover"
									style="height: 70px; width:70px;" src="/assets/profile/Rubber_Ducky.png" alt="User avatar">
								<!-- le cadre -->
								<img id="user-status" class="absolute inset-0 w-full h-full object-cover" src="/assets/basic/status_away_small.png" alt="Status frame">
							</div>
	
							<!-- username, bio et status -->
							<div class="flex flex-col justify-center pl-4 flex-1">
								<div class="flex items-center gap-2 mb-1">
									<p class="text-xl font-semibold" id="user-name">Username</p>
	
									<!-- selection du status = dynamique -->
									<div class="relative">
										<button id="status-selector" class="flex items-center gap-1 px-2 py-1 text-sm rounded-sm hover:bg-gray-200">
											<span id="current-status-text">(Available)</span>
											<img src="/assets/chat/arrow.png" alt="Arrow" class="w-3 h-3">
										</button>
	
										<!-- Menu dropdown pour le status -->
										<div id="status-dropdown" class="absolute hidden top-full left-0 mt-1 w-70 bg-white border border-gray-300 rounded-md shadow-xl z-50">
											<button class="status-option w-full text-left px-3 py-2 hover:bg-gray-100 flex items-center gap-2" data-status="available">
												<span class="w-2 h-2 rounded-full"></span>
												<span>Available</span>
											</button>
											<button class="status-option w-full text-left px-3 py-2 hover:bg-gray-100 flex items-center gap-2" data-status="busy">
												<span class="w-2 h-2 rounded-full"></span>
												<span>Busy</span>
											</button>
											<button class="status-option w-full text-left px-3 py-2 hover:bg-gray-100 flex items-center gap-2" data-status="away">
												<span class="w-2 h-2 rounded-full"></span>
												<span>Away</span>
											</button>
											<button class="status-option w-full text-left px-3 py-2 hover:bg-gray-100 flex items-center gap-2" data-status="invisible">
												<span class="w-2 h-2 rounded-full"></span>
												<span>Offline</span>
											</button>
										</div>
									</div>
								</div>
								<div id="bio-wrapper">
									<p id="user-bio" class="text-sm text-gray-600 italic cursor-text">Share a quick message</p>
									<span class="char-count hidden text-xs text-gray-500 self-center">0/70</span>
								</div>
							</div>
	
							<!-- Notifications /// a mettre en hidden -> ne s'affiche que quand on a une notification!-->
							<div class="ml-auto flex items-start relative">
								<button id="notification-button" class="relative w-10 h-10 cursor-pointer">
									<img id="notification-icon" 
										src="/assets/basic/no_notification.png" 
										alt="Notifications" 
										class="w-full h-full object-contain">
										<div id="notification-badge" class="absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full hidden border border-white"></div>
								</button>
								<div id="notification-dropdown" class="absolute hidden top-full right-0 mt-2 w-80 bg-white border border-gray-300 rounded-md shadow-xl z-50 overflow-hidden">
									<div class="bg-gray-50 px-4 py-2 border-b border-gray-200">
										<h3 class="font-semibold text-sm text-gray-700">Notifications</h3>
									</div>
									<div id="notification-list" class="flex flex-col max-h-64 overflow-y-auto">
										<div class="p-4 text-center text-xs text-gray-500">No notification</div>
									</div> <!--fin du listing inside dropdown-->
								</div> <!--fin du div dropdown-->
							</div>
						</div>

					</div>	<!--FIn du premier cadre-->		
					<div class="bg-white p-4 flex flex-col items-center justify-center gap-2">
						<h1 class="text-lg font-semibold mb-2">Wanna play? üëæ</h1>

						<button id="local-game" 
							class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
								px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
								active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
							LOCAL
						</button>

						<button id="remote-game" 
							class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
								px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
								active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
							REMOTE
						</button>

						<button id="tournament-game" 
							class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
								px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
								active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
							TOURNAMENT
						</button>
					</div>	<!--FIn du second cadre-->	
				</div>
			</div>


			<!-- ========= RIGHT WINDOW ========= -->
			<div class="window flex flex-col flex-1 min-w-0">
				<div class="title-bar">
					<div class="title-bar-text">Messenger</div>
					<div class="title-bar-controls">
						<button aria-label="Minimize"></button>
						<button aria-label="Maximize"></button>
						<button aria-label="Close"></button>
					</div>
				</div>

				<div id="right" class="window-body flex flex-row gap-4 flex-1 min-w-0">

					<div id="chat-frame" class="relative flex-1 p-10 bg-gradient-to-b from-blue-50 to-gray-400 rounded-sm flex flex-row items-end bg-cover bg-center transition-all duration-300 min-h-0">

						<div id="friend-list" class="flex flex-col bg-white border border-gray-300 rounded-sm shadow-sm p-4 w-[350px] min-w-[350px] relative z-10 min-h-0 h-full"  style="width:350px; min-width: 350px;">
							<div class="flex flex-row items-center justify-between">
								<p class="text-xl text-black font-semibold text-center tracking-wide mb-3 select-none">MY FRIENDS</p>
								
								<div class="ml-auto flex items-center mb-3 relative">
									<button id="add-friend-button" class="relative w-9 h-9 cursor-pointer">
										<img id="add-friend-icon" 
											src="/assets/basic/1441.png" 
											alt="Friends button" 
											class="w-full h-full object-contain">
									</button>
									<div id="add-friend-dropdown" class="absolute hidden top-full right-0 mt-2 w-72 bg-white border border-gray-300 rounded-md shadow-xl z-50 p-4">
										<p class="text-sm font-semibold mb-2 text-center">Add a friend</p>
										<input type="text" 
											id="friend-search-input" 
											placeholder="Type in username or email" 
											class="w-full px-3 py-2 text-sm border border-gray-300 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-400 mb-3">
										<div class="flex gap-2">
											<button id="send-friend-request" 
												class="flex-1 bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm px-3 py-1.5 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400">
												Send request
											</button>
											<button id="cancel-friend-request" 
												class="flex-1 bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400  rounded-sm px-3 py-1.5 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400">
												Cancel
											</button>
										</div>
										<div id="friend-request-message" class="mt-2 text-xs hidden"></div>
									</div>
								</div>
							</div>

							<div class="flex flex-col gap-3 overflow-y-auto pr-1 select-none border-t border-gray-500" style="padding-top: 13px;">

								<details open class="group">
									<summary class="flex items-center gap-2 cursor-pointer font-semibold text-sm py-1 hover:text-blue-600">
										‚≠ê Contacts
									</summary>

									<div id="contacts-list" class="mt-2 ml-4 flex flex-col gap-2">
										</div>
								</details>

								<details class="group">
									<summary class="flex items-center gap-2 cursor-pointer font-semibold text-sm py-1 hover:text-blue-600">
										üìÅ Groups
									</summary>

									<div class="mt-2 ml-4 flex flex-col gap-2">
										<div class="text-xs text-gray-600 ml-1">les bogoce</div>
										<div class="text-xs text-gray-600 ml-1">les cheums</div>
									</div>
								</details>
							</div>
						</div>

						<div id="chat-placeholder" class="flex flex-col items-center justify-center flex-1 h-full relative z-10 bg-white border border-gray-300 rounded-sm shadow-sm">
							<img src="/assets/basic/messenger_logo.png" alt="" class="w-24 h-24 opacity-20 grayscale mb-4">
							<p class="text-gray-400 text-lg font-semibold">Select a friend to start chatting</p>
						</div>

						<div id="channel-chat" class="hidden flex flex-col bg-white border border-gray-300 rounded-sm shadow-sm p-4 flex-1 relative z-10 min-h-0 h-full">
							
							<div class="flex items-center justify-between border-b border-gray-200 pb-2 mb-2 relative">
								<div class="flex gap-4 items-center">
									<div class="relative w-[80px] h-[80px] flex-shrink-0">
										<!-- l'image (profil principal) -->
										<img id="chat-header-avatar" 
											class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[50px] h-[50px] object-cover"
											src="" 
											alt="User avatar">
										<!-- le cadre -->
										<img id="chat-header-status" 
											class="absolute inset-0 w-full h-full object-contain" 
											src="/assets/basic/status_online_small.png" 
											alt="Status frame">
									</div>
									<div class="flex flex-col justify-start leading-tight">
										<p id="chat-header-username" class="font-bold text-lg leading-none text-gray-800"></p>
										<p id="chat-header-bio" class="text-xs text-gray-500 italic"></p>
									</div>
								</div>
								
								<div class="relative self-start mt-2">
									<button id="chat-options-button" class="p-1 hover:bg-gray-100 rounded-full transition duration-200 cursor-pointer">
										<img src="/assets/chat/meatball.png"
											 alt="options"
											 class="w-6 h-6 object-contain"
											 style="width: 24px; height: 24px; display: block;">
									</button>



									<div id="chat-options-dropdown" class="absolute right-0 top-full mt-1 bg-white border border-gray-300 rounded-md shadow-xl z-50 hidden overflow-hidden">
										<button id="button-view-profile" class="w-full text-left px-4 py-2 hover: bg-blue-50 text-sm text-gray-700 transition">
											View my friend's profile
										</button>
										<button id="button-invite-game" class="w-full text-left px-4 py-2 hover: bg-blue-50 text-sm text-gray-700 transition">
											Invite to play
										</button>
										<button id="button-report-user" class="w-full text-left px-4 py-2 hover: bg-blue-50 text-sm text-gray-700 transition">
											Report user
										</button>
										<button id="button-block-user" class="w-full text-left px-4 py-2 hover: bg-blue-50 text-sm text-gray-700 transition">
											Report user
										</button>
									</div>

								</div> <!-- fin de la div menu ...-->


							</div>



							<div id="chat-messages" class="flex-1 h-0 overflow-y-auto min-h-0 pt-2 space-y-2 text-sm"></div>

							<div class="flex flex-col">
								<input type="text" id="chat-input" placeholder="√âcrire un message..." class="mt-3 bg-gray-100 rounded-sm p-2 outline-none focus:ring-2 focus:ring-blue-500 text-sm">

								<div class="flex border-x border-b rounded-b-[4px] border-[#bdd5df] items-center pl-1" style="background-image: url(&quot;/assets/chat/chat_icons_background.png&quot;);">
									<button id="select-emoticon" class="h-6">
										<div class="relative flex items-center aerobutton p-0.7 h-5 border border-transparent rounded-sm hover:border-gray-300">
											<div class="w-5"><img src="/assets/chat/select_emoticon.png" alt="Select Emoticon"></div>
											<div><img src="/assets/chat/arrow.png" alt="Select arrow"></div>

											<div id="emoticon-dropdown" class="absolute z-10 hidden bottom-full left-0 mb-1 w-72 p-2 bg-white border border-gray-300 rounded-md shadow-xl">
												<div class="grid grid-cols-8 gap-1" id="emoticon-grid"></div>
											</div>
										</div>
									</button>

									<button id="select-animation" class="h-6">
										<div class="relative flex items-center aerobutton p-0.7 h-5 border border-transparent rounded-sm hover:border-gray-300">
											<div class="w-5"><img src="/assets/chat/select_wink.png" alt="Select Animation"></div>
											<div><img src="/assets/chat/arrow.png" alt="Select arrow"></div>

											<div id="animation-dropdown" class="absolute z-10 hidden bottom-full left-0 mb-1 w-72 p-2 bg-white border border-gray-300 rounded-md shadow-xl">
												<div class="grid grid-cols-8 gap-1" id="animation-grid"></div>
											</div>
										</div>
									</button>

									<div class="absolute top-0 left-0 flex w-full h-full justify-center items-center pointer-events-none"><div></div></div>
									<button id="send-wizz" class="flex items-center aerobutton p-1 h-6 border border-transparent rounded-sm hover:border-gray-300"><div><img src="/assets/chat/wizz.png" alt="Sending wizz"></div></button>
									<div class="px-2"><img src="/assets/chat/chat_icons_separator.png" alt="Icons separator"></div>

									<!-- Menu pour les fonts -->
									
									<button id="change-font" class="h-6">
										<div class="relative flex items-center aerobutton p-0.7 h-5 border border-transparent rounded-sm hover:border-gray-300">
										<div class="w-5"><img src="/assets/chat/change_font.png" alt="Change font"></div>
										<div><img src="/assets/chat/arrow.png" alt="Select arrow"></div>

										<!-- Menu dropdown -> il s'ouvre quand on clique -->
										<div id="font-dropdown" class="absolute z-10 hidden bottom-full left-0 mb-1 w-auto p-1 bg-white border border-gray-300 rounded-md shadow-xl">
											<div class="grid grid-cols-4 gap-[2px] w-[102px]" id="font-grid"></div>
										</div>

										</div>
									</button>

									<div class="relative">
									<button id="select-background" class="flex items-center aerobutton p-1 h-6 border border-transparent rounded-sm hover:border-gray-300">
										<div class="w-5"><img src="/assets/chat/select_background.png" alt="Background"></div>
										<div><img src="/assets/chat/arrow.png" alt="Arrow"></div>
									</button>

									<div id="background-dropdown" class="absolute hidden bottom-full right-0 mb-1 w-64 p-2 bg-white border border-gray-300 rounded-md shadow-xl z-50">
										<p class="text-xs text-gray-500 mb-2 pl-1">Choose a background:</p>
													
										<div class="grid grid-cols-3 gap-2">
														
											<button class="bg-option w-full h-12 border border-gray-200 hover:border-blue-400 rounded bg-cover bg-center" 
													data-bg="url('/assets/backgrounds/fish_background.jpg')"
													style="background-image: url('/assets/backgrounds/fish_background.jpg');">
											</button>

											<button class="bg-option w-full h-12 border border-gray-200 hover:border-blue-400 rounded bg-cover bg-center" 
													data-bg="url('/assets/backgrounds/heart_background.jpg')"
													style="background-image: url('/assets/backgrounds/heart_background.jpg');">
											</button>

											<button class="bg-option w-full h-12 border border-gray-200 hover:border-blue-400 rounded bg-cover bg-center" 
													data-bg="url('/assets/backgrounds/lavender_background.jpg')"
													style="background-image: url('/assets/backgrounds/lavender_background.jpg');">
											</button>

											<button class="bg-option col-span-3 text-xs text-red-500 hover:underline mt-1" data-bg="none">
												Default background
											</button>
										</div>
									</div>
								</div>
						</div>
					</div> 
				</div>
			</div> 
		</div>

	</div>





    <div id="friend-profile-modal" class="absolute inset-0 bg-black/40 z-50 hidden items-center justify-center">
        <div class="window bg-white" style="width: 650px; box-shadow: 0px 0px 20px rgba(0,0,0,0.5);">
            <div class="title-bar">
                <div class="title-bar-text">My friend</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize"></button>
                    <button aria-label="Maximize"></button>
                    <button id="close-modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="window-body p-6">
                <div class="mb-6">
                    <h2 id="friend-username" class="text-xl mb-1">'s profile</h2>
                </div>
                
                <div class="flex flex-row gap-6">
					<div class="flex flex-col items-center gap-4 w-[200px]">
                        <div class="relative w-[170px] h-[170px]">
                            <img class="absolute inset-0 w-full h-full object-cover z-10 pointer-events-none"
                            src="https://wlm.vercel.app/assets/status/status_frame_online_large.png">
                            
                            <img id="modal-preview-avatar" class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[130px] h-[130px] object-cover"
                            src="https://wlm.vercel.app/assets/usertiles/default.png">
                        </div>

                        <div class="flex flex-col gap-2 w-full mt-2 h-64">
                            <input type="file" id="file-input" accept="image/*" hidden>

                            <button id="browse-button" 
                            class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
                                px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
                                active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
                            BROWSE
                            </button>
                            
                            <button id="delete-button" 
                            class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
                                px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
                                active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
                            DELETE
                            </button>

                            <div class="mt-auto flex justify-center gap-2 pb-3" style="padding-top:101px">
                                <button id="validation-button" 
                                        class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
                                            px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
                                            active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
                                        OK
                                </button>
                                <button id="cancel-button" 
                                        class="bg-gradient-to-b from-gray-100 to-gray-300 border border-gray-400 rounded-sm 
                                            px-4 py-1 text-sm shadow-sm hover:from-gray-200 hover:to-gray-400 
                                            active:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-400">
                                        CANCEL
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="bg-white border border-[#828790] shadow-inner p-2 h-[250px] overflow-y-auto">
                            <div id="modal-grid" class="grid grid-cols-4 gap-2">
                                <img src="/assets/profile/Beach_Chairs.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Chess_Pieces.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Dirt_Bike.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Friendly_Dog.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Guest_(Windows_Vista).png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Orange_Daisy.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Palm_Trees.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Rocket_Launch.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Rubber_Ducky.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Running_Horses.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Skateboarder.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Soccer_Ball.png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/User_(Windows_Vista).png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Usertile11_(Windows_Vista).png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Usertile3_(Windows_Vista).png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                                <img src="/assets/profile/Usertile8_(Windows_Vista).png" class="w-full aspect-square object-cover border-2 border-transparent hover:border-[#0078D7] cursor-pointer">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!--fin de la modale pour voir le profil de ses amis -->


</div> <!-- fin du main container -->